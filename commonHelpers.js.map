{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'https://api.thecatapi.com/v1/';\nconst API_KEY =\n  'live_8Wl1NUYFJhvYgeZls4YXPXSn1CRGnyvhRR4L69kQeeLTgPieF5v9ebYgSulmpN6r';\n\naxios.defaults.headers.common['x-api-key'] = API_KEY;\n\nexport const fetchBreeds = async () => {\n  const { data } = await axios.get(`${API_URL}breeds`);\n\n  return data;\n};\n\nexport const fetchCatByBreed = async breedId => {\n  const { data } = await axios.get(\n    `${API_URL}images/search?breed_ids=${breedId}`\n  );\n  if (data.length === 0) {\n    throw new Error('No cats found for this breed!');\n  }\n\n  return data;\n};\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchBreeds, fetchCatByBreed } from './cat-api.js';\n\nconst refs = {\n  select: document.querySelector('.js-breed-select'),\n  catInfo: document.querySelector('.js-cat-info'),\n  loader: document.querySelector('.js-loader'),\n};\n\ngetBreeds();\n\nasync function getBreeds() {\n  try {\n    refs.loader.classList.remove('isHidden');\n    const breeds = await fetchBreeds();\n\n    const data = breeds.map(breed => {\n      return {\n        text: breed.name,\n        value: breed.id,\n      };\n    });\n\n    new SlimSelect({\n      select: '#single',\n      data,\n      settings: {\n        hideSelected: true,\n      },\n    });\n\n    refs.select.classList.remove('isHidden');\n    refs.select.addEventListener('change', onChange);\n  } catch (error) {\n    console.log('error', error);\n    iziToast.show({\n      message: 'Oops! Something went wrong! Try reloading the page!',\n      color: 'red',\n      position: 'topRight',\n    });\n  } finally {\n    refs.loader.classList.add('isHidden');\n  }\n}\n\nasync function onChange(e) {\n  const breedId = e.target.value;\n\n  try {\n    refs.catInfo.classList.add('isHidden');\n    refs.loader.classList.remove('isHidden');\n    const data = await fetchCatByBreed(breedId);\n    const markup = data\n      .map(cat => {\n        const { name, description, life_span, temperament } = cat.breeds[0];\n\n        return `\n          <div class=\"block\">\n          <img src=\"${cat.url}\" alt=\"${name}\" width=\"300\">\n          <p><span class=\"title\">Breed:</span> ${name}</p>\n          <p><span class=\"title\">Description:</span> ${description}</p>\n          <p><span class=\"title\">Life span:</span> ${life_span}</p>\n          <p><span class=\"title\">Temperament:</span> ${temperament}</p>\n          </div>\n          `;\n      })\n      .join('');\n\n    refs.catInfo.innerHTML = markup;\n    refs.catInfo.classList.remove('isHidden');\n  } catch (error) {\n    console.log('error', error);\n    iziToast.show({\n      message: 'Oops! Something went wrong! Try reloading the page!',\n      color: 'red',\n      position: 'topRight',\n    });\n  } finally {\n    refs.loader.classList.add('isHidden');\n  }\n}\n"],"names":["API_URL","API_KEY","axios","fetchBreeds","data","fetchCatByBreed","breedId","refs","getBreeds","breed","SlimSelect","onChange","error","iziToast","e","markup","cat","name","description","life_span","temperament"],"mappings":"owBAEA,MAAMA,EAAU,gCACVC,EACJ,wEAEFC,EAAM,SAAS,QAAQ,OAAO,aAAeD,EAEtC,MAAME,EAAc,SAAY,CACrC,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMF,EAAM,IAAI,GAAGF,SAAe,EAEnD,OAAOI,CACT,EAEaC,EAAkB,MAAMC,GAAW,CAC9C,KAAM,CAAE,KAAAF,CAAI,EAAK,MAAMF,EAAM,IAC3B,GAAGF,4BAAkCM,GACzC,EACE,GAAIF,EAAK,SAAW,EAClB,MAAM,IAAI,MAAM,+BAA+B,EAGjD,OAAOA,CACT,ECjBMG,EAAO,CACX,OAAQ,SAAS,cAAc,kBAAkB,EACjD,QAAS,SAAS,cAAc,cAAc,EAC9C,OAAQ,SAAS,cAAc,YAAY,CAC7C,EAEAC,IAEA,eAAeA,GAAY,CACzB,GAAI,CACFD,EAAK,OAAO,UAAU,OAAO,UAAU,EAGvC,MAAMH,GAFS,MAAMD,KAED,IAAIM,IACf,CACL,KAAMA,EAAM,KACZ,MAAOA,EAAM,EACrB,EACK,EAED,IAAIC,EAAW,CACb,OAAQ,UACR,KAAAN,EACA,SAAU,CACR,aAAc,EACf,CACP,CAAK,EAEDG,EAAK,OAAO,UAAU,OAAO,UAAU,EACvCA,EAAK,OAAO,iBAAiB,SAAUI,CAAQ,CAChD,OAAQC,EAAP,CACA,QAAQ,IAAI,QAASA,CAAK,EAC1BC,EAAS,KAAK,CACZ,QAAS,sDACT,MAAO,MACP,SAAU,UAChB,CAAK,CACL,QAAY,CACRN,EAAK,OAAO,UAAU,IAAI,UAAU,CACrC,CACH,CAEA,eAAeI,EAASG,EAAG,CACzB,MAAMR,EAAUQ,EAAE,OAAO,MAEzB,GAAI,CACFP,EAAK,QAAQ,UAAU,IAAI,UAAU,EACrCA,EAAK,OAAO,UAAU,OAAO,UAAU,EAEvC,MAAMQ,GADO,MAAMV,EAAgBC,CAAO,GAEvC,IAAIU,GAAO,CACV,KAAM,CAAE,KAAAC,EAAM,YAAAC,EAAa,UAAAC,EAAW,YAAAC,CAAW,EAAKJ,EAAI,OAAO,GAEjE,MAAO;AAAA;AAAA,sBAEOA,EAAI,aAAaC;AAAA,iDACUA;AAAA,uDACMC;AAAA,qDACFC;AAAA,uDACEC;AAAA;AAAA,WAGvD,CAAO,EACA,KAAK,EAAE,EAEVb,EAAK,QAAQ,UAAYQ,EACzBR,EAAK,QAAQ,UAAU,OAAO,UAAU,CACzC,OAAQK,EAAP,CACA,QAAQ,IAAI,QAASA,CAAK,EAC1BC,EAAS,KAAK,CACZ,QAAS,sDACT,MAAO,MACP,SAAU,UAChB,CAAK,CACL,QAAY,CACRN,EAAK,OAAO,UAAU,IAAI,UAAU,CACrC,CACH"}